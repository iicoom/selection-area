<img src="https://raw.githubusercontent.com/lucasmenendez/selection-area/master/assets/images/logo.svg?sanitize=true" width="80">

# Selection Area

[![npm version](https://img.shields.io/badge/npm%20package-0.1.0-green.svg)](https://www.npmjs.com/package/selection-area)

Simple JavaScript seletion area to any DOM container element.

<br/>

## Installation

### Install with `npm`

```sh
npm install selection-area
```

### Install with `yarn`

```sh
yarn add selection-area
```

### From Source Code

Clone or download zipped source code into `node_modules` project folder.

```sh
git clone https://github.com/lucasmenendez/selection-area.git <project>/node_modules/selection-area
```

## Including SelectionArea

Import dist version:

```html
<script src="/node_modules/webproletarian/dist/selection-area.js"></script>
```
or
```html
<script src="https://unpkg.com/selection-area"></script>
```

Or import with ES6 `import`:

```javascript
import { SelectionArea } from 'selection-area';
```

## Demo
Checkout the demo [here](http://lucasmenendez.github.io/selection-area/).

## Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [Area](#area)
    -   [Parameters](#parameters)
    -   [instance](#instance)
        -   [Parameters](#parameters-1)
    -   [resize](#resize)
        -   [Parameters](#parameters-2)
    -   [move](#move)
        -   [Parameters](#parameters-3)
    -   [destroy](#destroy)
    -   [isOver](#isover)
        -   [Parameters](#parameters-4)
-   [SelectionArea](#selectionarea)
    -   [Parameters](#parameters-5)
    -   [Examples](#examples)
    -   [onSelect](#onselect)
        -   [Parameters](#parameters-6)
    -   [checkConfig](#checkconfig)
        -   [Parameters](#parameters-7)
    -   [listenMouse](#listenmouse)
    -   [initArea](#initarea)
        -   [Parameters](#parameters-8)
    -   [updateArea](#updatearea)
        -   [Parameters](#parameters-9)
    -   [removeArea](#removearea)
        -   [Parameters](#parameters-10)
    -   [checkIntersections](#checkintersections)

### Area

Area class includes all required functions to emulate the area behaviour.
Constructor initializes main params of area Element and stores 
area DOM Element ID

#### Parameters

-   `id` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Area Element DOM ID
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Initial area position on x axis, default 0 (optional, default `0`)
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Initial area position on y axis, default 0 (optional, default `0`)

#### instance

Instance function creates DOM Element for selection area, assings
the ID provided and sets default style to it. The function receives 
container Element, append created area to it and stores both of them
into the current instance.

##### Parameters

-   `parent` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** Container Element to append selection area

#### resize

Recalculates current area dimensions and call uptdate to reset current
DOM Element.

##### Parameters

-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Current cursor position on x axis
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Current cursor position on y axis

#### move

Recalculates current area DOM Element position based en current cursor 
position.

##### Parameters

-   `posx` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Current cursor position on x axis
-   `posy` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Current cursor position on y axis

#### destroy

Deletes current DOM Element from parent container.

#### isOver

Calculates if target Element dimensions and current selection area DOM
Element dimensions intersects in any side.

##### Parameters

-   `target` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** Target DOM Element to check if area is over it

Returns **any** Boolean with intersection result

### SelectionArea

SelectionArea class listen mouse movements to create and adapt a selection 
area checking if intersects with any target child element and returns the 
content of defined property of that childs.

#### Parameters

-   `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config object
    -   `config.container` **[Element](https://developer.mozilla.org/docs/Web/API/Element)** DOM Element to make selectable
    -   `config.targetSelector` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** DOM selector of selectables childs
    -   `config.areaId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** DOM ID for selection area to define styles
    -   `config.property` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Property to get from selected childs
    -   `config.callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)?** Function to call when selection ends

#### Examples

```javascript
import { SelectionArea } from 'selection-area';

let container = document.querySelector('.parent');
let targetSelector = '.child';
let callback = selection => {
     if (selection.length == 0) console.warn("empty selection");
     else console.log(selection);
}

let selectable = new Selectable({ container, targetSelector, callback });
```

#### onSelect

Function stores user callback to invoke it when selection ends.

##### Parameters

-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Function defined as callback by user

#### checkConfig

Function that checks if all required configuration are provided as param,
extract whole configurayions inside it and stores into current instance.

##### Parameters

-   `config` **Onject** Configuration object definition

#### listenMouse

Sets custom listeners to mouse down, move and up events.

#### initArea

initArea funtion clears current selection, creates new area with ID 
provided and instances it into current container.

##### Parameters

-   `e` **[MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent)** 'mousedown' event metadata

#### updateArea

updateArea captures current mouse position and updates current selection
area with that position, resizing area and moving it.

##### Parameters

-   `e` **[MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent)** 'mousemove' event metadata.

#### removeArea

removeArea extract selected items, destroy current selection area and
invokes callback passing values of selected items.

##### Parameters

-   `e` **[MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent)** 'mouseup' event metadata.

#### checkIntersections

checkIntersecionts iterates over all posible targets and checks if
current selection area intersects with each of them. Stores all included
values of user defined child property.
